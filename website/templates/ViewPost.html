<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ViewPost</title>

                                                                                <!--links-->

<link rel="stylesheet" href="{{url_for('static',filename='/TemplatesCss/ViewPost.css')}}">
<link rel="stylesheet" href="{{url_for('static',filename='css/bootstrap.min.css')}}">
<link rel="stylesheet" href="{{url_for('static',filename='js/bootstrap.min.js')}}">
<script src="{{url_for('static',filename='jquery/jquery-3.6.0.min.js')}}"></script>



</head>
<body>
    <style> 

        :root{
          --first-background-gradient:#f5e6ff;
          --last-background-gradient:#fff;
          --header:#000;
          --header-text:#1C1C1C;
          --footer:#2D2D2D;
          --button-color:#6B0085;
          --button-color-hover:#6a0085cb;
          --button-color-active:#5c0272;
          --alert-button-color:#ed4337;
          --success-button-color:#53A653;
          --info-button-color:#b39800;
        }
            /* ______________Error Button________________ */
        .flash-container{
          display: flex;
          justify-content: center;
        }
         .succes{
          width: fit-content;
           background-color: var(--success-button-color);
           opacity: 90%;
           color: white;
         }
         .alert{
          width: fit-content;
           background-color: var(--alert-button-color);
           opacity: 90%;
           color: white;
         }
         .closebtn {
           margin-left: 15px;
           color: white;
           font-weight: bold;
           float: right;
           font-size: 22px;
           line-height: 20px;
           cursor: pointer;
           transition: 0.3s;
         }
         .closebtn:hover {
           color: black;
         }
         </style>
         {% with messages = get_flashed_messages(with_categories=true) %} {% if
           messages %} {% for category, message in messages %}
           {% if category =='success' %}
               <div class="flash-container">
                <div dir="rtl" class="succes">
                  <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                  {{message}}
                </div>
              </div>
              {% elif category =='error' %}
              <div class="flash-container">
               <div dir="rtl" class="alert">
                 <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                 {{message}}
               </div>
             </div>
           {%else%}
           <div class="flash-container">
            <div dir="rtl" class="Info">
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                {{message}}
              </div>
            </div>
   
           {% endif %} {% endfor %} {% endif %} {% endwith %}

                                                                              <!--Top Nav-->

    <nav class="navbar navbar-light bg-light mt-2" id="navbar"> 
    <div class="container">
        <a href="/mainpage" class="btn btn-primary  text-size-3 p-1" id="back" >الرجوع</a>
        <h1 id="logo">
        اسئلة
        </h1>
    </div>
    </nav>
    <div dir="rtl" class="container">

                                                                                <!--The Question + Comment field-->
    <div class="container">
        <div class="question text-light text-break">
            <h5  id="title" class="h3">{{post.title}}</h5>

            <div class="info text-light d-flex flex-row">
          
              <h6 class="h6"><span style="color: #F64C72;">بواسطة : </span>{{post.user.username}}</h6>
              <h6 class="h6" style="margin-right: 5%;"><span style="color: #F64C72; ">المادة :</span> {{post.subject}} </h6>
          </div>

            <h6 id="details" dir="rtl" class="h5">{{post.description}}
            </h6>
            <h6 class="h6"><span style="color: #F64C72;">التاريخ :</span> {{post.datetime}}</h6>
</div>
            {%if current_user.id == post.user.id%}
        
        <a href="/update-post/{{post.id}}" class="btn btn-primary edit" id="back" style="margin-top: 3%;">تعديل السؤال</a>
        
    {%endif%}
</div>  
              <h3 class="text-center text-light my-5">الاجابات :</h3>
              {% for item in teacher_comments%}
                {%if item.user.kind == "teacher"%}
              <div class="container">
                <div class="d-flex flex-column shadow p-5 comment">

                  
                  <div class="infocmnt d-flex flex-column justify-content-start text-light my-4 mb-5">
                    <h6 ><span style="color: #F64C72;"> بواسطة الاستاذ: </span>{{item.user.username}}</h6>
                    <h6 ><span style="color: #F64C72;">التاريخ :</span> {{item.datetime}}</h6>
                  </div>

                  
                  <h6 class="text-light text-break h5" style="line-height: 53px;">

                      {{item.description}} 

                  </h6>
                </div>  
                  {% if current_user.id == item.user.id%}
                
                <a href="/delete-comment/{{item.id}}/{{post.id}}" class="btn btn-primary mb-4" id="back" >حذف الاجابة</a>
            {%endif%}
        </div>




              
              {%endif%}
              {%endfor%}    
              {%for item in comment%}
              {% if item.user.kind == "student"%}
              <div class="container">
                <div class="d-flex flex-column shadow p-5 comment">

                  
                  <div class="infocmnt d-flex flex-column justify-content-start text-light my-4 mb-5">
                    <h6 ><span style="color: #F64C72;">بواسطة : </span>{{item.user.username}}</h6>
                    <h6 ><span style="color: #F64C72;">التاريخ :</span> {{item.datetime}}</h6>
                  </div>

                  
                  <h6 class="text-light text-break h5" style="line-height: 53px;">

                    {{item.description}} 


                </div>
                  </h6>
                  {% if current_user.id == item.user.id%}
                    <a href="/delete-comment/{{item.id}}/{{post.id}}" class="btn btn-primary mb-4" id="back" >حذف الاجابة</a>
                    {%endif%}
            </div>




              {%endif%}
              {%endfor%}  

              <form method="POST">
                <div  class="d-flex justify-content-start align-items-center flex-row inputparent">

                    <textarea id="desc" name="desc" class="input" dir="rtl" rows="8" cols="100" placeholder="اكتب هنا للاجابة"></textarea>
                    <button class="submit mx-4">
                      انشاء الاجابة
                  </button>
                </div>
            </form>       
</body> 
</html>