<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


                                                        <!--links-->
<link rel="stylesheet" href="{{url_for('static',filename='/TemplatesCss/mainpage.css')}}">
<link rel="stylesheet" href="{{url_for('static',filename='css/bootstrap.min.css')}}">
<link rel="stylesheet" href="{{url_for('static',filename='js/bootstrap.min.js')}}">
<script src="{{url_for('static',filename='jquery/jquery-3.6.0.min.js')}}"></script>

    <title>Mainpage</title>

    <style> 

      :root{
        --first-background-gradient:#f5e6ff;
        --last-background-gradient:#fff;
        --header:#000;
        --header-text:#1C1C1C;
        --footer:#2D2D2D;
        --button-color:#6B0085;
        --button-color-hover:#6a0085cb;
        --button-color-active:#5c0272;
        --alert-button-color:#ed4337;
        --success-button-color:#53A653;
        --info-button-color:#b39800;
      }
          /* ______________Error Button________________ */
      .flash-container{
        display: flex;
        justify-content: center;
      }
       .succes{
        width: fit-content;
         background-color: var(--success-button-color);
         opacity: 90%;
         color: white;
       }
       .alert{
        width: fit-content;
         background-color: var(--alert-button-color);
         opacity: 90%;
         color: white;
       }
       .closebtn {
         margin-left: 15px;
         color: white;
         font-weight: bold;
         float: right;
         font-size: 22px;
         line-height: 20px;
         cursor: pointer;
         transition: 0.3s;
       }
       .closebtn:hover {
         color: black;
       }
       .Info{
      width: fit-content;
       background-color: var(--info-button-color);
       opacity: 90%;
       color: white;
     }
       </style>
       {% with messages = get_flashed_messages(with_categories=true) %} {% if
         messages %} {% for category, message in messages %}
         {% if category =='success' %}
             <div class="flash-container">
              <div dir="rtl" class="succes">
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                {{message}}
              </div>
            </div>
            {% elif category =='error' %}
            <div class="flash-container">
             <div dir="rtl" class="alert">
               <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
               {{message}}
             </div>
           </div>
         {%else%}
         <div class="flash-container">
          <div dir="rtl" class="Info">
              <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
              {{message}}
            </div>
          </div>
 
         {% endif %} {% endfor %} {% endif %} {% endwith %}
    <style>
      /*--*/
      body {
        background-image: linear-gradient(#242582, #2F2FA2) !important;
        background-repeat: no-repeat;
        background-size: 100%;
      }
      
      #navbar {
        background-color: transparent !important;
      }
      #navbar #logo {
        color: #F64C72 !important;
      }
      #navbar #logout {
        background-color: transparent !important;
        outline: none !important;
        border: 2px #F64C72 solid;
        box-shadow: none !important;
      }
      #navbar #logout:hover {
        background-color: #fa6787 !important;
      }
      #navbar #logout:active {
        background-color: #ff3f69 !important;
      }
      
      .sidenav {
        height: 100%;
        width: 0;
        position: fixed;
        top: 0;
        left: 0;
        background-image: linear-gradient(#242582, #4d09ba);
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
      }
      
      .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #ffffff;
        display: block;
        transition: 0.3s;
        margin-bottom: 2%;
      }
      
      .sidenav a:hover {
        color: #bbbbbb;
      }
      
      .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 25px;
        font-size: 36px;
        margin-left: 50px;
      }
      
      #navopen {
        color: #fff;
        border: 2px #f895ab solid;
        padding: 1px;
        padding-left: 10px;
        padding-right: 10px;
        border-radius: 0.25em;
      }
      #navopen:hover {
        color: #F64C72;
        border: 2px #F64C72 solid;
      }
      #navopen:active {
        color: #000000;
        border: 2px #000 solid;
      }
      
      .srch {
        padding: 5px;
        border: 2px #fff solid;
        border-radius: 1em;
        outline: none !important;
      }
      .srch:hover {
        border: 2px #aeaeae solid;
      }
      .srch:focus {
        border-radius: 0.25em;
      }
      
      #search {
        background-color: transparent !important;
        outline: none !important;
        border: 2px #F64C72 solid;
        box-shadow: none !important;
        color: #F64C72;
      }
      #search:hover {
        background-color: #fa6787 !important;
        color: #960020;
      }
      #search:active {
        background-color: #ff3f69 !important;
      }
      
      .newq {
        padding-bottom: 2%;
        margin-top: 13%;
      }
      
      .newqbrdr {
        border-bottom: 2px #fff solid;
        padding-bottom: 6%;
        margin-bottom: 24%;
      }
      
      .zuttons {
        background-color: transparent !important;
        outline: none !important;
        border: 2px #F64C72 solid !important;
        box-shadow: none !important;
        margin-left: 1%;
      }
      .zuttons:hover {
        background-color: #fa6787 !important;
      }
      .zuttons:active {
        background-color: #ff3f69 !important;
      }
      
      #searchbtn {
        border-radius: 0.25em;
        color: white;
      }
      
      #filter {
        border-radius: 0.25em;
        outline: none !important;
        box-shadow: none !important;
        margin-left: 10%;
        margin-top: 5%;
      }
      #filter:active {
        background-color: #ebebeb;
      }
      
      .verify-div {
        width: 10%;
        margin-top: 25% !important;
      }
      
      .likenum {
        margin-right: 400%;
      }
      
      @media screen and (min-device-width: 50px) and (max-device-width: 560px) {
        * {
          font-size: 15px !important;
        }
        * .newq {
          margin-top: 25%;
        }
        * .newqbrdr {
          padding-bottom: 8%;
          margin-bottom: 35%;
        }
        * .zuttons {
          font-size: 12px !important;
          margin-top: 2%;
        }
        * .srch {
          font-size: 12px !important;
        }
        * #search {
          font-size: 10px !important;
        }
        * #logo {
          font-size: 18px !important;
        }
      }
      /*--*/
      #togglefilter{
        cursor: pointer;
      }
      #filter{
        display:none;                           
      }
      #searchbtn{
        display:none;
      }
      .color{
        background-color: white;
      }
      .verify{
        opacity: 100%;
            }
      .verify:hover{
        opacity: 80%;
      }
      .verify:active{
        opacity: 60%;
        color: rgba(0, 0, 0, 0.151);
      }
      .verify-div{
        margin-top: 2%;
                cursor: pointer;
      }
      .logo{
        margin-left: 25%;
        margin-bottom: 8%;
      }
    </style>
    
</head>
<body>
                                                          <!--Top Nav-->

    <nav class="navbar navbar-light bg-light mt-2" id="navbar"> 
        <div class="container">
          <span style="font-size:30px;cursor:pointer" onclick="openNav()" id="navopen">&#9776; </span>    
          <h1 id="logo">
            اسئلة

          </h1>
          
          
        </div>
      </nav>

                                                          <!--Side Nav-->

      <div id="mySidenav" class="sidenav">
        <img src="../static/Assets/logo2.png" width="100px" height="90px" class="logo">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        {% if current_user.kind == 'student' or current_user.kind == 'admin'%}
        <a href="{{url_for('CreatePostPage')}}" id="newqbtn">سؤال جديد</a>
        {%endif%}
        <a href="{{url_for('views.ProfilePage')}}">الملف الشخصي</a>
        <a href="{{url_for('auth.Logout')}}">تسجيل الخروج</a>
        
        
          {%if current_user.verified == 1 %}
            <a href="{{url_for('Support')}}">الدعم </a>
          {%endif%}
        <a class="" id="togglefilter">نوع الاسئلة</a>
        <div class="container">
            <form method="post">
            <select class="subject_input" id="filter" name="filter">
                <div class="options">
                <option value="none" selected disabled hidden>اختر</option>
                <option value="فيزياء">فيزياء</option>
                <option value="كيمياء">كيمياء</option>
                <option value="احياء">احياء</option>
                <option value="اللغة العربية">الغة العربية</option>
                <option value="اللغةالانجليزية">الغة الانجليزية</option>
                <option value="اللغة الفرنسية">الغة الفرنسية</option>
                <option value="اللغة الايطالية">الغة الايطالية </option>
                <option value="فلسفة">فلسفة</option>
                <option value="الجغرافيا">الجغرافيا</option>
                <option value="التاريخ">التاريخ</option>
                <option value="رياضيات">رياضيات</option>
                <option value="none">بدون</option>
                </div>
            </select>
            <button id="searchbtn" class="zuttons">ابحث</button>
            </form>
          </div>

      </div>


        <script>
        function openNav() {
          document.getElementById("mySidenav").style.width = "250px";
        }
        
        function closeNav() {
          document.getElementById("mySidenav").style.width = "0";
        }
        $(function(){
          $("#togglefilter").click(function(){
            $("#filter").toggle(200);
            $("#searchbtn").toggle(200);
          });
        });
        </script>

                                                        <!--Header and Search-->              
          <h3 class="text-center text-light mt-5">الاسئلة الجديدة</h3>
          <form method="POST" class="d-flex align-items-center justify-content-center mt-3">
            <input name="searchinput" id="searchinput" class=" srch me-2" dir="rtl" placeholder="اضغط للكتابة" >
            <button name="searchbtn" class="btn" id="search" type="submit">بحث</button>
          </form>


                                                        <!--Questions-->
        {%for item in post%}     
        <div class="container newq">

          <div dir="rtl" class=" newqbrdr text-center text-light">
            
              {%if item.title|length < 35 %}
              <h2 class="card_title d-flex justify-content-center mx-1"> {{item.title}}</h2>
              {%elif item.title|length > 35 and item.title|length < 45 %}
              <h3 class="card_title d-flex justify-content-center mx-1"> {{item.title}}</h3>
              {%elif item.title|length < 65 and item.title|length > 45 %}
              <h3 class="card_title d-flex justify-content-center mx-1"> {{item.title}}</h3>
              {%endif%}
              {%if current_user.id == item.user.id%}
              <h5 class="card_by d-flex justify-content-center mx-1">بواسطة: انت </h5> 
              
              
              {%else%}
              <h5 class="card_by d-flex justify-content-center mx-1">بواسطة: {{item.user.username}} </h3>          
              {%endif%}                
              <h5 class = "subject d-flex justify-content-center mx-1">{{item.subject}}</h5>     
              <h6 class="card_answer d-flex justify-content-center mx-1">{{item.datetime}}</h6>   
            

                  <div dir="rtl" class="d-flex flex-row justify-content-center align-items-center">
              {%if current_user.id == item.user.id%}
              <button class="btn btn-primary zuttons" onclick="window.location.href = '/view-post/{{item.id}}'" >ألقي نظرة</button>
              {%elif current_user.verified == True%}
              <button style="margin-top:1% !important;" class="btn btn-primary zuttons" style="margin-Top: 2%; margin-bottom: -2%;" onclick="window.location.href = '/view-post/{{item.id}}'" >اجب عليه</button>
              {%else%}
              <button style="margin-top:1% !important;" class="btn btn-primary zuttons" style="margin-Top: 2%; margin-bottom: -2%;" onclick="window.location.href = '/view-post/{{item.id}}'" >القي نظرة</button>
              {%endif%}

              {%if current_user.id == item.user.id%}
              <button class="btn btn-primary zuttons" onclick="window.location.href = '/delete-post/{{item.id}}'" >حذف</button>
              <button class="btn btn-primary zuttons" onclick="window.location.href = '/update-post/{{item.id}}'" >تعديل</button>
              {%elif current_user.kind =='admin'%}
              <button class="btn btn-primary zuttons" onclick="window.location.href = '/delete-post/{{item.id}}'" >حذف</button>
              {%endif%}

              {% if current_user.verified == 1 %}
              <form method="POST" style="margin-bottom:0% !important;">
                  {%if current_user.id == item.user.id%}
                  <div class="verify-div">
                <img onclick='like("{{item.id}}")' id="like-button-{{item.id}}" src="../static/Assets/thumbs unfill.png" class="verify like" width="50px" height="50px">
                <h6 style="color:white;" class='likenum' id="like-count-{{item.id}}">{{item.likes|length}}</h6>
              </div>
                {%elif current_user.verified == True%}
                <div class="verify-div" style="margin-top:20% !important;">
                  <img onclick='like("{{item.id}}")' id="like-button-{{item.id}}" src="../static/Assets/thumbs unfill.png" class="verify like" width="50px" height="50px">
                  <h6 style="color:white;" class='likenum' id="like-count-{{item.id}}">{{item.likes|length}}</h6>
                </div>
                {%else%}
                <div class="verify-div" style="margin-top:20% !important;">
                  <img onclick='like("{{item.id}}")' id="like-button-{{item.id}}" src="../static/Assets/thumbs unfill.png" class="verify like" width="50px" height="50px">
                  <h6 style="color:white;" class='likenum' id="like-count-{{item.id}}">{{item.likes|length}}</h6>
                </div>
                {%endif%}
              </form>
              {%endif%}
                   </div>
            
          </div>

              {%endfor%}
              {%for item in second_post%}
              <div class="container newq">

                <div dir="rtl" class=" newqbrdr text-center text-light">
                  
                    {%if item.title|length < 35 %}
                    <h2 class="card_title d-flex justify-content-center mx-1"> {{item.title}}</h2>
                    {%elif item.title|length > 35 and item.title|length < 45 %}
                    <h3 class="card_title d-flex justify-content-center mx-1"> {{item.title}}</h3>
                    {%elif item.title|length < 65 and item.title|length > 45 %}
                    <h3 class="card_title d-flex justify-content-center mx-1"> {{item.title}}</h3>
                    {%endif%}
                    {%if current_user.id == item.user.id%}
                    <h5 class="card_by d-flex justify-content-center mx-1">بواسطة: انت </h5> 
                    
                    
                    {%else%}
                    <h5 class="card_by d-flex justify-content-center mx-1">بواسطة: {{item.user.username}} </h3>          
                    {%endif%}                
                    <h5 class = "subject d-flex justify-content-center mx-1">{{item.subject}}</h5>     
                    <h6 class="card_answer d-flex justify-content-center mx-1">{{item.datetime}}</h6>   
                  
      
                        <div dir="rtl" class="d-flex flex-row justify-content-center align-items-center">
                    {%if current_user.id == item.user.id%}
                    <button class="btn btn-primary zuttons" onclick="window.location.href = '/view-post/{{item.id}}'" >ألقي نظرة</button>
                    {%elif current_user.verified == True%}
                    <button style="margin-top:1% !important;" class="btn btn-primary zuttons" style="margin-Top: 2%; margin-bottom: -2%;" onclick="window.location.href = '/view-post/{{item.id}}'" >اجب عليه</button>
                    {%else%}
                    <button style="margin-top:1% !important;" class="btn btn-primary zuttons" style="margin-Top: 2%; margin-bottom: -2%;" onclick="window.location.href = '/view-post/{{item.id}}'" >القي نظرة</button>
                    {%endif%}
      
                    {%if current_user.id == item.user.id%}
                    <button class="btn btn-primary zuttons" onclick="window.location.href = '/delete-post/{{item.id}}'" >حذف</button>
                    <button class="btn btn-primary zuttons" onclick="window.location.href = '/update-post/{{item.id}}'" >تعديل</button>
                    {%elif current_user.kind == "admin"%}
                    <button class="btn btn-primary zuttons" onclick="window.location.href = '/delete-post/{{item.id}}'" >حذف</button>
                    {%endif%}
      
                    {% if current_user.verified == 1 %}
                    <form method="POST" style="margin-bottom:0% !important;">
                        {%if current_user.id == item.user.id%}
                        <div class="verify-div">
                      <img onclick='like("{{item.id}}")' id="like-button-{{item.id}}" src="../static/Assets/thumbs unfill.png" class="verify like" width="50px" height="50px">
                      <h6 style="color:white;" class='likenum' id="like-count-{{item.id}}">{{item.likes|length}}</h6>
                    </div>
                      {%elif current_user.verified == True%}
                      <div class="verify-div" style="margin-top:20% !important;">
                        <img onclick='like("{{item.id}}")' id="like-button-{{item.id}}" src="../static/Assets/thumbs unfill.png" class="verify like" width="50px" height="50px">
                        <h6 style="color:white;" class='likenum' id="like-count-{{item.id}}">{{item.likes|length}}</h6>
                      </div>
                      {%else%}
                      <div class="verify-div" style="margin-top:20% !important;">
                        <img onclick='like("{{item.id}}")' id="like-button-{{item.id}}" src="../static/Assets/thumbs unfill.png" class="verify like" width="50px" height="50px">
                        <h6 style="color:white;" class='likenum' id="like-count-{{item.id}}">{{item.likes|length}}</h6>
                      </div>
                      {%endif%}
                    </form>
                    {%endif%}
                         </div>
                  
                </div>
      

                
              {%endfor%} 

                                        
              <script type="text/javascript" src="{{ url_for('static',filename='templatejs/like.js')}}"></script>
</body>
</html>